---
phase: 03-seo-sharing
plan: 02
type: execute
wave: 2
depends_on:
  - 03-01
files_modified:
  - src/composables/usePageTitle.js
  - src/main.js
  - src/views/HomeView.vue
  - src/views/PlayerView.vue
  - src/views/NotFoundView.vue
  - index.html
autonomous: false

must_haves:
  truths:
    - "Page title updates dynamically based on current route"
    - "Homepage title is 'Apex Legends Stats Tracker - Lookup Player Ranks & Stats'"
    - "Player profile page title is '{PlayerName} - Apex Legends Stats'"
    - "404 page title is '404 - Player Not Found'"
    - "Title updates when navigating between routes"
    - "index.html has meta description tag"
  artifacts:
    - path: "src/composables/usePageTitle.js"
      provides: "Page title management composable"
      exports: ["usePageTitle"]
    - path: "index.html"
      provides: "Base HTML with meta description"
      contains: "meta name=\"description\""
  key_links:
    - from: "src/main.js"
      to: "src/composables/usePageTitle.js"
      via: "import and call"
      pattern: "usePageTitle"
    - from: "src/composables/usePageTitle.js"
      to: "@vueuse/core"
      via: "import useTitle"
      pattern: "useTitle"
---

<objective>
Implement dynamic page titles using VueUse useTitle() for SEO.

Purpose: Each page should have a descriptive, SEO-friendly title that updates based on the current route and player data. The player's name should appear first in profile page titles for better search engine visibility.

Output: Dynamic page titles that update based on route and player data.
</objective>

<execution_context>
@/home/deck/.claude/get-shit-done/workflows/execute-plan.md
@/home/deck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/REQUIREMENTS.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-seo-sharing/03-CONTEXT.md
@.planning/phases/03-seo-sharing/03-RESEARCH.md

# Phase 3 Context
@.planning/phases/03-seo-sharing/03-01-SUMMARY.md

# Existing code
@src/main.js
@src/views/HomeView.vue
@src/views/PlayerView.vue
@src/views/NotFoundView.vue
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create usePageTitle composable</name>
  <files>src/composables/usePageTitle.js</files>
  <action>
    Create src/composables directory and src/composables/usePageTitle.js

    The composable should:
    1. Import useTitle from @vueuse/core
    2. Import useRoute from vue-router
    3. Import watch from vue
    4. Set default homepage title
    5. Watch route.name changes and update title accordingly
    6. Handle dynamic player name from route params or player store

    Title formats (per 03-CONTEXT.md):
    - Homepage: "Apex Legends Stats Tracker - Lookup Player Ranks & Stats"
    - Player profile: "{PlayerName} - Apex Legends Stats"
    - 404: "404 - Player Not Found"

    Implementation approach:
    - Use useTitle() with immediate: true
    - Watch route.name for changes
    - For player route, extract username from route.params
    - Use titleTemplate if needed for consistent suffix

    DO NOT use document.title directly - use useTitle() for reactivity
    DO NOT set title in each component - centralize in composable
  </action>
  <verify>
    File exists at src/composables/usePageTitle.js with:
    - useTitle imported from @vueuse/core
    - useRoute imported from vue-router
    - Watch on route.name
    - Title logic for home, player, and notFound routes
  </verify>
  <done>
    Composable is exported and manages page titles reactively
  </done>
</task>

<task type="auto">
  <name>Task 2: Register usePageTitle in main.js</name>
  <files>src/main.js</files>
  <action>
    Call the usePageTitle composable in main.js to initialize title management.

    Changes to src/main.js:
    1. Import usePageTitle from '@/composables/usePageTitle.js'
    2. Call usePageTitle() after creating the app but before mounting
    3. This ensures title management is active for all routes

    Placement:
    ```javascript
    const app = createApp(App)
    app.use(createPinia())
    app.use(router)
    usePageTitle() // Initialize title management
    app.mount('#app')
    ```

    DO NOT call usePageTitle inside any component - it should run once at app level
    DO NOT forget to import it - it won't work if not called
  </action>
  <verify>
    main.js contains:
    - Import of usePageTitle
    - Call to usePageTitle() before app.mount('#app')
  </verify>
  <done>
    Page titles update dynamically when navigating between routes
  </done>
</task>

<task type="auto">
  <name>Task 3: Add meta description to index.html</name>
  <files>index.html</files>
  <action>
    Update index.html with SEO meta tags.

    Changes to index.html:
    1. Update default <title> to match homepage title format
    2. Add meta description tag for the app
    3. Add viewport meta if not present
    4. Add meta charset if not present

    Meta description content:
    "Look up Apex Legends player stats, ranks, and performance data. Track your kills, wins, and favorite legends across all platforms (PC, Xbox, PlayStation)."

    Additional meta tags to add:
    - <meta name="description" content="...">
    - <meta name="robots" content="index, follow">

    Note: This satisfies SEO-02 requirement for basic meta tags. OG images are deferred per 03-CONTEXT.md.

    DO NOT add dynamic OG tags - those are deferred per 03-CONTEXT.md
    DO NOT change charset or viewport if already correctly set
  </action>
  <verify>
    index.html contains:
    - Meta description tag with app description
    - Meta robots tag allowing indexing
    - Title tag with homepage title
  </verify>
  <done>
    index.html has static meta tags for SEO
  </done>
</task>

<task type="auto">
  <name>Task 4: Update player title with fetched data</name>
  <files>src/views/PlayerView.vue, src/composables/usePageTitle.js</files>
  <action>
    Enhance the player page title to use the actual player name from API data when available.

    The issue: route.params.username may not match the actual player display name from the API.

    Solution approach:
    1. In PlayerView, after successful API fetch, store the actual player name
    2. Update usePageTitle composable to check player store for actual name
    3. Fall back to route.params.username if store data not available

    Implementation in usePageTitle.js:
    - Import usePlayerStore from '@/stores/player'
    - For player route, check if playerStore.data?.name exists
    - Use actual name from store if available, otherwise use route param
    - Watch playerStore.data.name changes for title updates

    Implementation in PlayerView.vue:
    - Ensure playerStore.data is populated after successful fetch
    - No direct title manipulation needed - composable handles it

    Title update flow:
    1. User visits /player/someUser/origin
    2. Initial title: "someUser - Apex Legends Stats" (from URL)
    3. API fetches data, returns actual name "SomeUser123"
    4. Title updates to: "SomeUser123 - Apex Legends Stats"

    DO NOT set title directly in PlayerView component
    DO NOT emit title events - let composable watch store changes
  </action>
  <verify>
    usePageTitle.js contains:
    - Import of usePlayerStore
    - Logic to check playerStore.data.name for actual player name
    - Watch on playerStore.data for title updates

    PlayerView.vue contains:
    - No direct title manipulation
    - playerStore.data populated after fetch
  </verify>
  <done>
    Player page title uses actual API player name when available
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete dynamic page title system with meta tags</what-built>
  <how-to-verify>
1. Start dev server: npm run dev
2. Open browser DevTools to observe the page title
3. Check homepage title in browser tab - should be "Apex Legends Stats Tracker - Lookup Player Ranks & Stats"
4. Navigate to a player profile - title should update to "{PlayerName} - Apex Legends Stats"
5. Try an invalid URL for 404 - title should be "404 - Player Not Found"
6. Navigate between routes - title should update smoothly without page reload

Expected behavior:
- Homepage shows correct title
- Player page title includes player name
- 404 page title is correct
- Title updates happen without page reload
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues with title behavior</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete, verify:
- [ ] usePageTitle composable exists and is registered in main.js
- [ ] Homepage shows correct title in browser tab
- [ ] Player profile page shows player name in title
- [ ] 404 page shows correct title
- [ ] Title updates smoothly when navigating between routes
- [ ] index.html has meta description tag
</verification>

<success_criteria>
1. Page titles update dynamically based on current route
2. Homepage title: "Apex Legends Stats Tracker - Lookup Player Ranks & Stats"
3. Player profile title: "{PlayerName} - Apex Legends Stats"
4. 404 page title: "404 - Player Not Found"
5. Meta description tag exists in index.html
6. Title updates use actual API player name when available
</success_criteria>

<output>
After completion, create `.planning/phases/03-seo-sharing/03-02-SUMMARY.md`
</output>
