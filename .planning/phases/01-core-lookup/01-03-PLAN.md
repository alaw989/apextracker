---
phase: 01-core-lookup
plan: 03
type: execute
wave: 3
depends_on: ["01-04"]
files_modified:
  - src/components/search/SearchInput.vue
  - src/components/search/PlatformSelect.vue
  - src/components/search/SearchButton.vue
  - src/App.vue
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User can type username in input field"
    - "User can select platform from icon buttons"
    - "User can click search button or press Enter to search"
    - "Platform selection highlights active choice"
    - "Search form is styled consistently with existing app"
  artifacts:
    - path: "src/components/search/SearchInput.vue"
      provides: "Username input field component"
      min_lines: 30
    - path: "src/components/search/PlatformSelect.vue"
      provides: "Platform selection buttons with icons"
      min_lines: 40
    - path: "src/components/search/SearchButton.vue"
      provides: "Search trigger button with loading state"
      min_lines: 30
    - path: "src/App.vue"
      provides: "Main app with search interface"
      contains: "SearchInput, PlatformSelect, SearchButton"
  key_links:
    - from: "src/components/search/PlatformSelect.vue"
      to: "src/utils/platformIcons.js"
      via: "import PlatformIcons"
      pattern: "PlatformIcons"
    - from: "src/components/search/SearchButton.vue"
      to: "src/components/ui/BaseButton.vue"
      via: "extends or uses BaseButton"
      pattern: "BaseButton"
    - from: "src/App.vue"
      to: "src/stores/player.js"
      via: "usePlayerStore for searchPlayer action"
      pattern: "searchPlayer"
    - from: "src/App.vue"
      to: "src/stores/ui.js"
      via: "useUiStore"
      pattern: "useUiStore"
---

<objective>
Build the search interface with username input, platform selector, and search button.

Purpose: The search interface is the primary user interaction point. Users enter their username and select their platform before searching. This plan creates the three search components following the feature-based organization from CONTEXT.md.

Output: Working search form with username input, platform icon selector, and search button wired to player store's searchPlayer action.
</objective>

<execution_context>
@/home/deck/.claude/get-shit-done/workflows/execute-plan.md
@/home/deck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-core-lookup/01-CONTEXT.md
@.planning/phases/01-core-lookup/01-RESEARCH.md
@src/components/Input.js
@src/components/InputContainer.js
@src/components/SearchButton.js
@src/components/PlatformIcons.js
</context>

<tasks>

<task type="auto">
  <name>Create PlatformSelect component</name>
  <files>src/components/search/PlatformSelect.vue</files>
  <action>
    Create src/components/search/PlatformSelect.vue:

    Props:
    - modelValue: string (currently selected platform id: 'origin', 'xbl', 'psn')
    - defaultValue: string = 'origin'

    Emits:
    - update:modelValue: when user selects a platform

    Template:
    - Container div with flex layout
    - Button for each platform from PLATFORMS constant
    - Each button shows PlatformIcon component
    - Active platform has different styling (green accent from CSS variables)

    Script:
    - Import PLATFORMS from '@/utils/constants'
    - Import PlatformIcons from '@/utils/platformIcons'
    - Use v-model pattern for two-way binding
    - Handle keyboard navigation (arrow keys)

    Scoped styles:
    - Container: display flex, gap 0.5rem
    - Buttons: padding 0.5rem 1rem, border 1px solid var(--border), background var(--bg-dark)
    - Hover: background var(--bg-lighter)
    - Active: background var(--accent-primary), border var(--accent-primary)
    - Match existing platform selector appearance from React app

    Follow pattern from RESEARCH.md "Platform Select Component" example.
  </action>
  <verify>
    1. Add PlatformSelect to App.vue with v-model binding to a ref
    2. Run dev server
    3. Verify: clicking each platform updates the bound value
    4. Verify: active platform has green accent styling
    5. Verify: keyboard navigation works with arrow keys
  </verify>
  <done>
    PlatformSelect renders three platform buttons, clicking updates selection, styling shows active state
  </done>
</task>

<task type="auto">
  <name>Create SearchInput component</name>
  <files>src/components/search/SearchInput.vue</files>
  <action>
    Create src/components/search/SearchInput.vue:

    Props:
    - modelValue: string
    - placeholder: string = 'Apex Username'

    Emits:
    - update:modelValue
    - submit: when user presses Enter

    Template:
    - Input element with v-model pattern
    - Container for proper spacing and alignment
    - Focus state handling (darken background as in original app)

    Script:
    - Handle @keydown.enter to emit 'submit' event
    - Optional: emit focus/blur events for background darkening effect

    Scoped styles:
    - Input: full width, padding, dark background, light text
    - Border: var(--border) color
    - Focus: border var(--accent-primary), outline none
    - Placeholder: var(--text-muted)

    Reference existing Input component styling from src/components/Input.js
  </action>
  <verify>
    1. Add SearchInput to App.vue with v-model
    2. Type in input - verify value updates
    3. Press Enter - verify submit event fires
    4. Check focus styling (border color change)
  </verify>
  <done>
    SearchInput accepts text input, emits submit on Enter, shows focus state
  </done>
</task>

<task type="auto">
  <name>Create SearchButton component</name>
  <files>src/components/search/SearchButton.vue</files>
  <action>
    Create src/components/search/SearchButton.vue:

    Props:
    - loading: boolean = false
    - disabled: boolean = false

    Emits:
    - click: when button is clicked (not emitted if disabled/loading)

    Template:
    - BaseButton component with variant="primary"
    - Shows loading spinner when loading=true
    - Disabled visual state when disabled or loading

    Script:
    - Import BaseButton from '@/components/ui/BaseButton'
    - Don't emit click if loading or disabled
    - Pass through remaining props to BaseButton

    Scoped styles:
    - Loading spinner: CSS animation (rotate)
    - Use existing accent color var(--accent-primary)

    Loading spinner can be simple CSS:
    ```css
    .spinner {
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    ```

    Reference existing SearchButton component from src/components/SearchButton.js
  </action>
  <verify>
    1. Add SearchButton to App.vue with loading prop
    2. Click button - verify click event emits
    3. Set loading=true - verify spinner shows, button is disabled
    4. Set disabled=true - verify button is not clickable
  </verify>
  <done>
    SearchButton emits click, shows spinner when loading, is disabled when loading/disabled props are true
  </done>
</task>

<task type="auto">
  <name>Wire up search form in App.vue</name>
  <files>src/App.vue</files>
  <action>
    Update src/App.vue to create the search form:

    Script setup:
    - Import search components
    - Import usePlayerStore and useUiStore from Pinia
    - Create local refs: username (''), platform ('origin')
    - Create handleSearch function that:
      - Validates username is not empty
      - Calls playerStore.searchPlayer(username, platform) from 01-04
      - Returns early if validation fails

    Template:
    - Header with title "CHECK PLAYER RANK AND STATS"
    - SearchInput for username (binds to username ref)
    - PlatformSelect for platform choice (binds to platform ref)
    - SearchButton to trigger search (calls handleSearch)
    - Arrange in row layout matching existing app (inline on desktop, stacked on mobile)

    Scoped styles:
    - Container with max-width, centered
    - Row layout using flexbox
    - Responsive: stack vertically on mobile (< 768px)
    - Match existing layout from src/components/InputContainer.js

    Layout should match existing app's search wrapper:
    - "CHECK PLAYER RANK AND STATS" heading
    - Input and platform select in same row
    - Search button to the right

    Note: searchPlayer action is implemented in 01-04. This plan wires the UI to that action.
  </action>
  <verify>
    1. Run dev server
    2. Verify all three components render in correct layout
    3. Type username, select platform, click search
    4. Verify handleSearch calls playerStore.searchPlayer with correct params
    5. Check responsive layout on mobile viewport
  </verify>
  <done>
    Search form renders with all components, handleSearch calls playerStore.searchPlayer, layout matches existing app
  </done>
</task>

</tasks>

<verification>
After all tasks complete, verify:
- [ ] All three search components exist in src/components/search/
- [ ] PlatformSelect shows three platform buttons with icons
- [ ] SearchInput accepts text and emits submit on Enter
- [ ] SearchButton shows loading spinner and disables when loading
- [ ] App.vue renders the complete search form
- [ ] handleSearch calls playerStore.searchPlayer with username and platform
- [ ] Layout is responsive (stacks on mobile, row on desktop)
- [ ] CSS variables are used for all colors
</verification>

<success_criteria>
1. User can type a username in the search input
2. User can select a platform (PC, Xbox, PlayStation) using icon buttons
3. User can trigger search by clicking button or pressing Enter
4. Selected platform is visually highlighted with green accent
5. Search form layout matches existing app's appearance
6. handleSearch calls playerStore.searchPlayer action (implemented in 01-04)
</success_criteria>

<output>
After completion, create `.planning/phases/01-core-lookup/01-03-SUMMARY.md`
</output>
