---
phase: 02-visual-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/stats/StatsList.vue
  - src/components/legends/FavoriteLegends.vue
  - src/components/legends/LegendCard.vue
  - src/components/stats/PlayerHeader.vue
  - src/style/transitions.css
autonomous: false

must_haves:
  truths:
    - "Stat cards animate smoothly when appearing (fade + slide up)"
    - "Legend cards animate with staggered delay (first appears, then second)"
    - "Animations replay cleanly when searching for a new player"
  artifacts:
    - path: "src/style/transitions.css"
      provides: "Shared transition CSS classes for card animations"
      contains: ".card-appear, .stagger"
    - path: "src/components/stats/StatsList.vue"
      provides: "Stats list with Transition wrapper"
      contains: "<Transition, appear"
    - path: "src/components/legends/FavoriteLegends.vue"
      provides: "Legend cards with TransitionGroup for staggered animation"
      contains: "<TransitionGroup"
  key_links:
    - from: "src/components/stats/StatsList.vue"
      to: "src/style/transitions.css"
      via: "CSS class imports"
      pattern: "@import.*transitions"
    - from: "src/components/legends/FavoriteLegends.vue"
      to: "src/style/transitions.css"
      via: "CSS class imports"
      pattern: "stagger-enter-active"
    - from: "src/App.vue"
      to: "data ref changes"
      via: "player data updates trigger animation replay"
      pattern: ":key.*animKey"
---

<objective>
Add smooth stat card animations using Vue's Transition components. Stats and legends fade/slide in when data loads, with staggered timing for legend cards.

Purpose: Visual feedback - animations give users a sense of data "arriving" and make the app feel more polished and responsive.
Output: Working card animations that replay on each new search.
</objective>

<execution_context>
@/home/deck/.claude/get-shit-done/workflows/execute-plan.md
@/home/deck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/REQUIREMENTS.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-visual-polish/02-RESEARCH.md

# Phase 1 Context
@.planning/phases/01-core-lookup/01-01-SUMMARY.md
@.planning/phases/01-core-lookup/01-05-SUMMARY.md

# Existing components to animate
@src/components/stats/StatsList.vue
@src/components/legends/FavoriteLegends.vue
@src/components/legends/LegendCard.vue
@src/components/stats/PlayerHeader.vue
@src/App.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create shared transitions CSS file</name>
  <files>src/style/transitions.css</files>
  <action>
Create a new CSS file for shared transition animations that will be used across stat and legend components.

File location: src/style/transitions.css

Required CSS classes (from 02-RESEARCH.md patterns):

1. Single card appear animation (fade + slide up):
```css
.card-appear-enter-active {
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.card-appear-enter-from {
  opacity: 0;
  transform: translateY(20px);
}
```

2. Staggered list animation (for legend cards):
```css
.stagger-enter-active {
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.stagger-enter-from {
  opacity: 0;
  transform: translateY(20px) scale(0.95);
}

/* Stagger delays using nth-child */
.stagger-enter-active:nth-child(1) {
  transition-delay: 0ms;
}

.stagger-enter-active:nth-child(2) {
  transition-delay: 100ms;
}
```

3. Performance note: Only animate transform and opacity (not layout properties)

Include a comment at the top explaining this file should be imported in components that use transitions, NOT in base.css (to avoid unused CSS).
  </action>
  <verify>
File exists at src/style/transitions.css with:
- .card-appear-enter-active and .card-appear-enter-from classes
- .stagger-enter-active and .stagger-enter-from classes
- nth-child transition-delay rules for stagger
- Uses transform and opacity only (no height/width/layout animations)
  </verify>
  <done>
transitions.css file exists with all required classes
CSS follows performance best practices (transform + opacity only)
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Transition to StatsList component</name>
  <files>src/components/stats/StatsList.vue</files>
  <action>
Wrap the StatsList content with Vue's `<Transition>` component for fade/slide animation on appear.

Changes to src/components/stats/StatsList.vue:

1. Import transitions.css in the style section:
```css
<style scoped>
@import '@/style/transitions.css';
/* existing styles */
</style>
```

2. Add an animKey ref to force re-render on new data:
```javascript
import { ref, watch, computed } from 'vue'

const props = defineProps({...})

// Force re-render trigger for replaying animations
const animKey = ref(0)

watch(() => props.stats, () => {
  animKey.value++
}, { immediate: true })
```

3. Wrap the BaseCard with Transition component:
```vue
<template>
  <Transition
    name="card-appear"
    :key="animKey"
    appear
  >
    <BaseCard v-if="hasStats" class="stats-list">
      <!-- existing content -->
    </BaseCard>
  </Transition>
</template>
```

The `appear` prop ensures animation on first render.
The `:key="animKey"` forces re-mount when stats change, replaying the animation.

DO NOT add `mode` prop - this is a single element appear animation, not a swap.
  </action>
  <verify>
StatsList.vue contains:
- @import for transitions.css
- animKey ref that increments on stats change
- Transition component wrapping BaseCard with name="card-appear"
- appear prop on Transition
- :key="animKey" on Transition
  </verify>
  <done>
StatsList fades and slides up when data loads
Animation replays when searching for a new player
  </done>
</task>

<task type="auto">
  <name>Task 3: Add TransitionGroup to FavoriteLegends component</name>
  <files>src/components/legends/FavoriteLegends.vue</files>
  <action>
Wrap the legend cards with Vue's `<TransitionGroup>` component for staggered fade/slide animations.

Changes to src/components/legends/FavoriteLegends.vue:

1. Import transitions.css in the style section:
```css
<style scoped>
@import '@/style/transitions.css';
/* existing styles */
</style>
```

2. Add animKey ref to force re-render on new data:
```javascript
import { ref, watch, computed } from 'vue'

const props = defineProps({...})

// Force re-render trigger for replaying animations
const animKey = ref(0)

watch(() => props.legends, () => {
  animKey.value++
}, { immediate: true })
```

3. Replace the v-for loop with TransitionGroup:
```vue
<template>
  <div v-if="hasLegends" class="favorite-legends">
    <h3 class="favorite-legends__header">Favorite Legends</h3>
    <TransitionGroup
      name="stagger"
      tag="div"
      :key="animKey"
      class="favorite-legends__list"
      appear
    >
      <LegendCard
        v-for="(legend, index) in topLegends"
        :key="`legend-${legend.name}-${animKey}`"
        :legend="legend"
        :is-favorite="index === 0"
        :data-index="index"
        class="favorite-legends__item"
      />
    </TransitionGroup>
  </div>
</template>
```

Note: The key on LegendCard includes animKey to ensure Vue treats them as new elements on each search.

DO NOT use move class - this is appear-only, not a reordering animation.
  </action>
  <verify>
FavoriteLegends.vue contains:
- @import for transitions.css
- animKey ref that increments on legends change
- TransitionGroup component with name="stagger", appear, tag="div"
- :key on TransitionGroup and LegendCard includes animKey
- class="favorite-legends__list" moved to TransitionGroup
  </verify>
  <done>
Legend cards animate in with staggered timing (first card, then second with 100ms delay)
Animation replays when searching for a new player
  </done>
</task>

<task type="auto">
  <name>Task 4: Add transition animation to PlayerHeader</name>
  <files>src/components/stats/PlayerHeader.vue</files>
  <action>
Wrap the PlayerHeader content with Vue's `<Transition>` component for fade/slide animation.

Changes to src/components/stats/PlayerHeader.vue:

1. Import transitions.css in the style section:
```css
<style scoped>
@import '@/style/transitions.css';
/* existing styles */
</style>
```

2. Add animKey ref and watch for player changes:
```javascript
import { ref, watch, computed } from 'vue'

const props = defineProps({...})

// Force re-render trigger for replaying animations
const animKey = ref(0)

watch(() => props.player, () => {
  animKey.value++
}, { immediate: true })
```

3. Wrap the BaseCard with Transition component:
```vue
<template>
  <Transition
    name="card-appear"
    :key="animKey"
    appear
  >
    <BaseCard v-if="props.player.name" class="player-header">
      <!-- existing content -->
    </BaseCard>
  </Transition>
</template>
```

This keeps the PlayerHeader animation in sync with the other stats components.
  </action>
  <verify>
PlayerHeader.vue contains:
- @import for transitions.css
- animKey ref that increments on player change
- Transition component wrapping BaseCard with name="card-appear"
- appear prop on Transition
  </verify>
  <done>
PlayerHeader fades and slides up when player data loads
Animation timing feels natural alongside StatsList and FavoriteLegends
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete stat card animation system with staggered legend cards</what-built>
  <how-to-verify>
1. Start dev server: npm run dev
2. Search for a player
3. Observe the animation sequence:
   - PlayerHeader fades/slides up first
   - StatsList fades/slides up
   - FavoriteLegends cards animate with stagger (first card, then second with delay)
4. Search for a different player
5. Verify animations replay (not just on first search)
6. Check timing feels natural (not too fast, not too slow)
7. Verify animations use only transform and opacity (smooth, GPU-accelerated)

Expected behavior:
- All stat cards fade and slide up from 20px below
- Legend cards have 100ms stagger between them
- Animations replay cleanly on each new search
- No janky layout animations
- Total animation duration ~400ms per card
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues with animation behavior</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:
1. StatsList, PlayerHeader, and FavoriteLegends all animate on data load
2. Animations replay when searching for new players (animKey pattern working)
3. Legend cards have noticeable stagger (first appears before second)
4. Animations use transform + opacity only (no layout thrashing)
5. All Phase 1 functionality remains working (no regressions)
</verification>

<success_criteria>
1. All stat display components animate smoothly on data load
2. Animations replay on each new search (not just first load)
3. Stagger effect is visible on legend cards
4. No visual glitches or janky animations
5. Core lookup functionality remains intact
</success_criteria>

<output>
After completion, create `.planning/phases/02-visual-polish/02-02-SUMMARY.md`
</output>
