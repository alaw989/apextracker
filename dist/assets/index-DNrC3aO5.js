const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomeView-D-xBYrDH.js","assets/vue-vendor-BNec_bD5.js","assets/LoadingSpinner-BixYdI5T.js","assets/BaseButton-DtSWhggt.js","assets/BaseButton-DETWmteE.css","assets/LoadingSpinner--HElkfA3.css","assets/HomeView-DeXnfU3h.css","assets/PlayerView-ID9kFN1h.js","assets/PlayerView-CKeb_NLx.css","assets/NotFoundView-pkW_ZPfc.js","assets/NotFoundView-CJVfZ3Hf.css"])))=>i.map(i=>d[i]);
var O=(r,n,a)=>new Promise((s,t)=>{var e=d=>{try{l(a.next(d))}catch(u){t(u)}},o=d=>{try{l(a.throw(d))}catch(u){t(u)}},l=d=>d.done?s(d.value):Promise.resolve(d.value).then(e,o);l((a=a.apply(r,n)).next())});import{c as Q,a as Z,b as R,r as v,d as ee,u as te,w as F,e as ae,o as U,f as $,g as D,h as re,n as ne,T as oe,i as x,s as se,j as le,R as ce,F as ue,k as ie,l as fe}from"./vue-vendor-BNec_bD5.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function s(t){if(t.ep)return;t.ep=!0;const e=a(t);fetch(t.href,e)}})();const de="modulepreload",me=function(r){return"/"+r},J={},K=function(n,a,s){let t=Promise.resolve();if(a&&a.length>0){let o=function(u){return Promise.all(u.map(E=>Promise.resolve(E).then(i=>({status:"fulfilled",value:i}),i=>({status:"rejected",reason:i}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));t=o(a.map(u=>{if(u=me(u),u in J)return;J[u]=!0;const E=u.endsWith(".css"),i=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${i}`))return;const p=document.createElement("link");if(p.rel=E?"stylesheet":de,E||(p.as="script"),p.crossOrigin="",p.href=u,d&&p.setAttribute("nonce",d),document.head.appendChild(p),E)return new Promise((k,b)=>{p.addEventListener("load",k),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function e(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return t.then(o=>{for(const l of o||[])l.status==="rejected"&&e(l.reason);return n().catch(e)})},C={},pe=[{id:"origin",name:"PC",icon:"pc"},{id:"xbl",name:"Xbox",icon:"xbox"},{id:"psn",name:"PlayStation",icon:"psn"}],W={API_KEY:"05e6eb8f-3e95-4fbb-a2b5-b0f4dbb124c9",BASE_URL:"https://public-api.tracker.gg/v2/apex/standard/profile",PROXY_URL:(C==null?void 0:C.VITE_PROXY_URL)||"https://fathomless-mesa-94824.herokuapp.com/"},h={PLAYER_NOT_FOUND:"Player not found. Please check the username and platform.",NETWORK_ERROR:"Network error. Please try again.",RATE_LIMIT:"Too many requests. Please wait a moment.",GENERIC_ERROR:"An error occurred. Please try again."};function he(){return pe.map(r=>r.id)}const ve=()=>K(()=>import("./HomeView-D-xBYrDH.js"),__vite__mapDeps([0,1,2,3,4,5,6])),ge=()=>K(()=>import("./PlayerView-ID9kFN1h.js"),__vite__mapDeps([7,1,2,3,4,5,8])),ye=()=>K(()=>import("./NotFoundView-pkW_ZPfc.js"),__vite__mapDeps([9,1,3,4,10])),Ee=[{path:"/",name:"home",component:ve,meta:{title:"Apex Legends Stats Tracker - Lookup Player Ranks & Stats"}},{path:"/player/:username/:platform",name:"player",component:ge,props:!0,meta:{title:void 0}},{path:"/:pathMatch(.*)*",name:"notFound",component:ye,meta:{title:"404 - Player Not Found"}}],H=Q({history:Z("/"),routes:Ee,scrollBehavior(){return{top:0}}});H.beforeEach((r,n,a)=>{if(r.params.platform&&!he().includes(r.params.platform)){a({name:"notFound"});return}a()});function T(r,n){return O(this,null,function*(){if(!r||typeof r!="string"||r.trim()==="")throw new Error(h.PLAYER_NOT_FOUND);if(!n||typeof n!="string")throw new Error(h.GENERIC_ERROR);if(!["origin","xbl","psn"].includes(n))throw new Error(h.GENERIC_ERROR);const s=r.trim(),t=`${W.BASE_URL}/${n}/${s}`;try{const e=yield fetch(t,{method:"GET",headers:{"TRN-Api-Key":W.API_KEY,Accept:"application/json"}});if(e.status===404)throw new Error(h.PLAYER_NOT_FOUND);if(e.status===429)throw new Error(h.RATE_LIMIT);if(e.status===403)throw new Error(h.GENERIC_ERROR);if(!e.ok)throw new Error(h.NETWORK_ERROR);const o=yield e.json();if(!o||!o.data)throw new Error(h.NETWORK_ERROR);return o}catch(e){throw e.message&&(e.message.includes(h.PLAYER_NOT_FOUND)||e.message.includes(h.RATE_LIMIT)||e.message.includes(h.NETWORK_ERROR)||e.message.includes(h.GENERIC_ERROR))?e:new Error(h.NETWORK_ERROR)}})}const _e=10,N="cache:lru",L="cache:player:";function X(r){try{let n=[];const a=localStorage.getItem(N);if(a)try{n=JSON.parse(a)}catch(t){n=[]}Array.isArray(n)||(n=[]);const s=n.indexOf(r);if(s>-1&&n.splice(s,1),n.push(r),n.length>_e){const t=n.shift();try{localStorage.removeItem(L+t)}catch(e){}}localStorage.setItem(N,JSON.stringify(n))}catch(n){console.warn("Failed to update LRU tracking:",n)}}function Re(r){X(r);try{const n=localStorage.getItem(L+r);if(n===null)return null;try{return JSON.parse(n)}catch(a){return localStorage.removeItem(L+r),null}}catch(n){return null}}function we(r,n){X(r);try{const a=JSON.stringify(n);return localStorage.setItem(L+r,a),!0}catch(a){if(a.name==="QuotaExceededError"||a.code===22)try{const s=localStorage.getItem(N);if(s)try{const t=JSON.parse(s);if(Array.isArray(t)&&t.length>0){const e=t.shift();localStorage.removeItem(L+e),localStorage.setItem(N,JSON.stringify(t));const o=JSON.stringify(n);return localStorage.setItem(L+r,o),!0}}catch(t){}}catch(s){}return console.warn("Failed to set cache, degrading to in-memory:",a),!1}}const Ae=900*1e3;function Pe(r){if(!r)return"";const a=Date.now()-r;if(a<6e4)return"Just now";const s=Math.floor(a/6e4);if(s<60)return`${s} min ago`;const t=Math.floor(a/36e5);if(t<24)return`${t} hr ago`;const e=Math.floor(a/864e5);return`${e} day${e>1?"s":""} ago`}function Se(r=null){const n=v(null),a=v(null),s=v(!1),t=v(r);function e(){if(!t.value)return;const i=Re(t.value);i&&(n.value=i.data,a.value=i.time)}const o=R(()=>a.value?Date.now()-a.value>Ae:!0),l=R(()=>Pe(a.value));function d(k){return O(this,arguments,function*(i,p={}){const{forceRefresh:b=!1}=p;if(e(),n.value&&!o.value&&!b)return n.value;const I=n.value;s.value=!0;try{const w=yield i();return n.value=w,a.value=Date.now(),t.value&&we(t.value,{data:w,time:a.value}),s.value=!1,w}catch(w){if(s.value=!1,I)return I;throw w}})}function u(i){t.value=i}function E(){n.value=null,a.value=null}return{cached:n,timestamp:a,isLoading:s,currentCacheKey:t,isStale:o,age:l,fetchWithCache:d,setCacheKey:u,clear:E,loadFromCache:e}}const q=ee("player",()=>{const r=v(null),n=v(!1),a=v(null),s=v(!1),t=v(null),e=v(!1),o=Se(null),l=R(()=>a.value!==null),d=R(()=>r.value!==null),u=R(()=>n.value||s.value),E=R(()=>{if(!t.value)return"";const c=Date.now()-t.value;if(c<6e4)return"Just now";const m=Math.floor(c/6e4);if(m<60)return`${m} min ago`;const _=Math.floor(c/36e5);if(_<24)return`${_} hr ago`;const A=Math.floor(c/864e5);return`${A} day${A>1?"s":""} ago`});function i(f){var S,B,G,M;if(!f||!f.data)throw new Error("Invalid API response format");const c=f.data.segments;if(!c||!Array.isArray(c)||c.length===0)throw new Error("No segments in API response");const m=c[0],_=[];for(const g in m.stats){const y=m.stats[g];typeof y=="object"&&y.displayName&&_.push({subtitle:y.displayName,stat:y.displayValue||y.value||((S=y.rankScore)==null?void 0:S.displayValue)||"N/A"})}const P=c.filter(g=>{var y,j;return g.type!=="overview"&&((j=(y=g.stats)==null?void 0:y.kills)==null?void 0:j.value)!==void 0}).sort((g,y)=>y.stats.kills.value-g.stats.kills.value).slice(0,2).map(g=>({name:g.metadata.name,imageUrl:g.metadata.imageUrl,kills:g.stats.kills.displayValue||g.stats.kills.value}));return{name:f.data.platformInfo.platformUserHandle,avatar:f.data.platformInfo.avatarUrl,rankIcon:((M=(G=(B=m.stats)==null?void 0:B.rankScore)==null?void 0:G.metadata)==null?void 0:M.iconUrl)||"",stats:_,legends:P}}function p(_,A){return O(this,arguments,function*(f,c,m={}){n.value=!0,a.value=null;const P=`${c}:${f}`;o.setCacheKey(P);try{const S=yield o.fetchWithCache(()=>T(f,c),m);return r.value=i(S),t.value=o.timestamp.value,{success:!0,fromCache:!1}}catch(S){return a.value=S instanceof Error?S.message:"Failed to fetch player data",r.value=null,t.value=null,{success:!1,error:a.value}}finally{n.value=!1}})}function k(f,c){return O(this,null,function*(){s.value=!0,a.value=null;const m=`${c}:${f}`;o.setCacheKey(m);try{if(o.loadFromCache(),o.cached.value!==null)return r.value=i(o.cached.value),t.value=o.timestamp.value,s.value=!1,T(f,c).then(P=>{r.value=i(P),t.value=Date.now(),o.cached.value=P,o.timestamp.value=t.value,o.setCache(m,{data:P,time:t.value})}).catch(()=>{}),{success:!0,fromCache:!0};const A=yield T(f,c);return r.value=i(A),t.value=Date.now(),o.cached.value=A,o.timestamp.value=t.value,o.setCache(m,{data:A,time:t.value}),{success:!0,fromCache:!1}}catch(_){return a.value=_ instanceof Error?_.message:"Failed to search for player",r.value=null,t.value=null,{success:!1,error:a.value}}finally{s.value=!1}})}function b(){r.value=null,a.value=null}function I(){a.value=null}function w(f,c){return O(this,null,function*(){e.value=!0;const m=yield p(f,c,{forceRefresh:!0});return e.value=!1,m})}return{data:r,loading:n,searchLoading:s,error:a,cacheTimestamp:t,isRefreshing:e,hasError:l,hasData:d,isLoading:u,cacheAge:E,fetchPlayer:p,searchPlayer:k,clearPlayer:b,clearError:I,forceRefresh:w}});function z(){const r=ae(),n=q(),a=te("Apex Legends Stats Tracker - Lookup Player Ranks & Stats",{titleTemplate:null,observe:!0});function s(e){var o,l;return e?e.name==="player"&&((o=n.data)!=null&&o.name)?n.data.name:(l=e.params)!=null&&l.username?e.params.username:null:null}function t(e){if(!(!e||!e.name))switch(e.name){case"home":a.value="Apex Legends Stats Tracker - Lookup Player Ranks & Stats";break;case"player":const o=s(e);o?a.value=`${o} - Apex Legends Stats`:a.value="Apex Legends Stats";break;case"notFound":a.value="404 - Player Not Found";break;default:a.value="Apex Legends Stats Tracker"}}return F(()=>r==null?void 0:r.name,(e,o)=>{e!==o&&t(r)},{immediate:!0}),F(()=>{var e;return(e=n.data)==null?void 0:e.name},(e,o)=>{r&&r.name==="player"&&e&&e!==o&&t(r)}),t(r),{title:a,updateTitle:t}}const Oe={pathfinder:"pathfinder.jpg",bangalore:"bangalore.png",bloodhound:"bloodhound.png",caustic:"caustic.png",gibraltar:"gibraltar.png",lifeline:"lifeline.png",mirage:"mirage.png",wattson:"wattson.png",wraith:"wraith.png",octane:"octane.png",crypto:"crypto.png"},Y="/backgrounds/default.jpg";function Le(r){if(!r||typeof r!="string")return Y;const n=r.toLowerCase().trim(),a=Oe[n];return a?`/backgrounds/${a}`:Y}const be={class:"app-background"},Ie={__name:"AppBackground",props:{favoriteLegend:{type:Object,default:null}},setup(r){const n=r,a=v(0),s=v("/backgrounds/default.jpg"),t=R(()=>{var e;return(e=n.favoriteLegend)!=null&&e.name?Le(n.favoriteLegend.name):null});return F(t,e=>{e&&e!==s.value&&(s.value=e,a.value++)},{immediate:!0}),(e,o)=>(U(),$("div",be,[D(oe,{name:"bg-fade",mode:"out-in"},{default:re(()=>[(U(),$("div",{key:a.value,class:"app-background__image",style:ne({backgroundImage:`url(${s.value})`})},null,4))]),_:1}),o[0]||(o[0]=x("div",{class:"app-background__overlay"},null,-1))]))}},Ne=(r,n)=>{const a=r.__vccOpts||r;for(const[s,t]of n)a[s]=t;return a},ke={class:"app"},Ce={class:"app__container"},Te={__name:"App",setup(r){z();const n=q(),{data:a}=se(n),s=R(()=>{var t,e;return(e=(t=a.value)==null?void 0:t.legends)!=null&&e.length?a.value.legends[0]:null});return(t,e)=>(U(),$(ue,null,[D(Ie,{"favorite-legend":s.value},null,8,["favorite-legend"]),x("div",ke,[x("div",Ce,[D(le(ce))])])],64))}},Fe=Ne(Te,[["__scopeId","data-v-3c94b461"]]),Ue=ie(),V=fe(Fe);V.use(Ue);V.use(H);z();V.mount("#app");export{pe as P,Ne as _,Pe as t,q as u};
